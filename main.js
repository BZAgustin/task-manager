(()=>{"use strict";const t=(t,e,n,i,s,o,c)=>{const a=document.createElement("div");a.classList.add("task"),a.id=`task-${o}`,a.dataset.index=o;const r=document.createElement("div"),d=document.createElement("div");r.classList.add("left-section"),d.classList.add("right-section");const l=document.createElement("input");l.type="checkbox",l.checked=s,l.id=`task-${o}-checkbox`;const m=document.createElement("h3");m.innerHTML=t,m.id=`task-${o}-name`;const u=document.createElement("span");u.className="task-span",u.innerHTML=e,s&&(m.style.textDecoration="line-through",m.style.color="gray"),r.appendChild(l),r.appendChild(m),r.appendChild(u);const p=document.createElement("span");p.className="task-span",p.classList.add(`priority-${i}`),p.innerHTML=`${{0:"LOW",1:"MID",2:"HIGH"}[i]} PRIORITY`;const y=document.createElement("div");y.className="divisor";const h=document.createElement("span");h.innerHTML=""===n?"No due date":`Due Date: ${n.getUTCDate()}/${n.getMonth()+1}/${n.getFullYear()}`;const g=document.createElement("img");g.addEventListener("click",c),g.classList.add("small"),g.src="./assets/edit.png",g.alt="Edit",g.id=`edit-task-${o}`;const k=document.createElement("img");return k.classList.add("small"),k.src="./assets/remove.png",k.dataset.index=o,k.alt="X",k.id=`remove-task-${o}`,d.appendChild(p),d.appendChild(y),d.appendChild(h),d.appendChild(g),d.appendChild(k),a.appendChild(r),a.appendChild(d),a},e=(t,e)=>{const n=document.createElement("li");n.id=`project-${e}`;const i=document.createElement("div");i.dataset.index=e;const s=document.createElement("img");s.src="./assets/project.png",s.alt="O";const o=document.createElement("span");o.innerHTML=t;const c=document.createElement("img");return c.classList.add("small"),c.src="./assets/remove.png",c.alt="X",i.appendChild(s),i.appendChild(o),n.appendChild(i),n.appendChild(c),n},n=class{constructor(t,e,n,i,s=!1){this.name=t,this.description=e,this.dueDate=n,this.priority=i,this.completed=s}get name(){return this._name}set name(t){this._name=t}get description(){return this._description}set description(t){this._description=t}get dueDate(){return this._dueDate}set dueDate(t){this._dueDate=t}get priority(){return this._priority}set priority(t){this._priority=t}get completed(){return this._completed}set completed(t){this._completed=t}},i=class{constructor(t){this.name=t,this.myTasks=[],this.isComplete=!1}get name(){return this._name}set name(t){this._name=t}get myTasks(){return this._myTasks}set myTasks(t){this._myTasks=t}addTask(t){this.myTasks.push(t)}get isComplete(){return this._isComplete}set isComplete(t){this._isComplete=t}removeTask(t){this.myTasks.splice(this.myTasks.indexOf(t),1)}};function s(t,e){var n;localStorage.setItem("projects",JSON.stringify(t)),n=e,localStorage.setItem("defaultProject",JSON.stringify(n))}const o=(()=>{const n=document.getElementById("btn-inbox"),i=document.getElementById("btn-today"),s=document.getElementById("btn-week"),o=document.getElementById("btn-new-project"),c=document.getElementById("input-container"),a=document.getElementById("project-name-input"),r=document.getElementById("btn-confirm-project-name"),d=document.getElementById("cancel-project"),l=document.getElementById("task-list-title"),m=document.getElementById("btn-new-task"),u=document.querySelector(".create-task"),p=document.getElementById("title-input"),y=document.getElementById("description-input"),h=document.getElementById("date-input"),g=document.getElementById("btn-low"),k=document.getElementById("btn-mid"),E=document.getElementById("btn-high"),v=document.getElementById("btn-add-task"),L=document.getElementById("btn-cancel-task"),f=document.querySelector(".overlay-container"),b=document.getElementById("title-input-edit"),j=document.getElementById("description-input-edit"),T=document.getElementById("date-input-edit"),P=document.getElementById("btn-low-edit"),I=document.getElementById("btn-mid-edit"),C=document.getElementById("btn-high-edit"),D=document.getElementById("btn-confirm-edit"),w=document.getElementById("btn-cancel-edit"),B=document.getElementById("project-list"),N=document.querySelector(".task-list");function x(t){p.value=t}function _(t){y.value=t}function M(t){h.value=t}function H(t,e,n,i){0===i?(t.classList.add("priority-low-on"),e.classList.remove("priority-mid-on"),n.classList.remove("priority-high-on")):1===i?(e.classList.add("priority-mid-on"),t.classList.remove("priority-low-on"),n.classList.remove("priority-high-on")):2===i?(n.classList.add("priority-high-on"),t.classList.remove("priority-low-on"),e.classList.remove("priority-mid-on")):(n.classList.remove("priority-high-on"),t.classList.remove("priority-low-on"),e.classList.remove("priority-mid-on"))}return{taskDivFactory:t,projectDivFactory:e,btnInbox:n,btnToday:i,btnWeek:s,btnNewProject:o,container:u,inputContainer:c,projectNameInput:a,btnConfirmProject:r,btnCancelProject:d,btnNewTask:m,btnLow:g,btnMid:k,btnHigh:E,btnAddTask:v,btnCancelTask:L,projectListParent:B,taskListParent:N,taskOverlay:f,taskListAdd:function(t){N.appendChild(t)},projectListAdd:function(t){B.appendChild(t)},getTaskName:function(){return p.value},setTaskName:x,getProjectName:function(){return a.value},getDescription:function(){return y.value},setDescription:_,getDate:function(){return h.value},setDate:M,titleEdit:b,descriptionEdit:j,dateEdit:T,btnLowEdit:P,btnMidEdit:I,btnHighEdit:C,btnConfirmEdit:D,btnCancelEdit:w,setListTitle:function(t){l.innerHTML=t},updatePriority:H,clearFields:function(){x(""),_(""),M(""),H(g,k,E,""),H(P,I,C,"")},showTaskListPlaceholder:function(){const t=document.createElement("h2");t.innerHTML="Nothing here...",t.style.color="gray",N.appendChild(t)},showProjectListPlaceholder:function(){const t=document.createElement("h2");t.innerHTML="Nothing here...",B.appendChild(t)}}})(),c=new i("INBOX"),a={projects:[],activeProject:c},r={activeTask:void 0,currentPriority:0};function d(t){return new n(t._name,t._description,new Date(t._dueDate),t._priority,t._completed)}function l(t){return new i(t._name)}if("projects"in localStorage){const t=JSON.parse(localStorage.defaultProject)._myTasks;for(const e of t)c.myTasks.push(d(e));const e=JSON.parse(localStorage.getItem("projects"));for(const t of e){const e=l(t);for(const n of t._myTasks)e.myTasks.push(d(n));a.projects.push(e)}}function m(){const t=[];t.push(c.myTasks);for(const e of a.projects)t.push(e.myTasks);return t.flat()}function u(){if(""!==o.getTaskName()){const t=o.getTaskName(),e=o.getDescription(),i=new Date(`${o.getDate()}`),d=new n(t,e,i,r.currentPriority,!1);a.activeProject.myTasks.push(d),L(a.activeProject.myTasks),o.container.style.display="none",o.clearFields(),s(a.projects,c)}}function p(){o.taskOverlay.style.display="none";const t=r.activeTask;t.name=o.titleEdit.value,t.description=o.descriptionEdit.value,t.priority=r.currentPriority,t.date=o.dateEdit.value,L(a.activeProject.myTasks),s(a.projects,c)}function y(t){return function(){o.taskOverlay.style.display="flex",r.activeTask=t,o.titleEdit.value=t.name,o.descriptionEdit.value=t.description,o.updatePriority(o.btnLowEdit,o.btnMidEdit,o.btnHighEdit,t.priority),""!==t.dueDate&&(o.dateEdit.value=t.dueDate.toISOString().split("T")[0])}}function h(t){return function(){a.projects.splice(t,1),document.getElementById(`project-${t}`).remove(),a.activeProject=c,o.setListTitle(a.activeProject.name),L(a.activeProject.myTasks),s(a.projects,c)}}function g(t){return function(){a.activeProject=a.projects[t],o.setListTitle(a.activeProject.name),L(a.activeProject.myTasks)}}function k(){if(""!==o.getProjectName()){const t=o.getProjectName();a.projects.push(new i(t)),a.activeProject=a.projects[a.projects.length-1],f(a.projects),o.setListTitle(a.activeProject.name),o.inputContainer.style.display="",o.projectNameInput.value="",s(a.projects,c),L(a.activeProject.myTasks)}}function E(t){const e=document.getElementById(`task-${t.dataset.index}-name`);m()[t.dataset.index].completed=!0,e.style.textDecoration="line-through",e.style.color="gray"}function v(t){const e=document.getElementById(`task-${t.dataset.index}-name`);m()[t.dataset.index].completed=!1,e.style.textDecoration="none",e.style.color=""}function L(t){!function(t){for(;o.taskListParent.firstChild;)o.taskListParent.removeChild(o.taskListParent.firstChild);for(const e of t)r.activeTask=e,isNaN(e.dueDate.getDate())?o.taskListAdd(o.taskDivFactory(e.name,e.description,"",e.priority,e.completed,t.indexOf(e),y(r.activeTask))):o.taskListAdd(o.taskDivFactory(e.name,e.description,e.dueDate,e.priority,e.completed,t.indexOf(e),y(r.activeTask)));for(const t of Array.from(o.taskListParent.childNodes)){const e=t.dataset.index,n=document.getElementById(`task-${e}-checkbox`);document.getElementById(`remove-task-${e}`).addEventListener("click",(()=>{a.activeProject.removeTask(a.activeProject.myTasks[e]),t.remove(),L(a.activeProject.myTasks)})),n.addEventListener("click",(()=>{n.checked?E(t):v(t),s(a.projects,c)}))}0===t.length&&o.showTaskListPlaceholder()}(t)}function f(t){for(;o.projectListParent.firstChild;)o.projectListParent.removeChild(o.projectListParent.firstChild);for(const e of t)o.projectListAdd(o.projectDivFactory(e.name,t.indexOf(e)));for(const t of Array.from(o.projectListParent.childNodes)){const e=t.childNodes[1],n=t.childNodes[0].dataset.index;e.addEventListener("click",h(n)),t.childNodes[0].addEventListener("click",g(n))}0===t.length&&o.showProjectListPlaceholder()}L(c.myTasks),f(a.projects),o.btnAddTask.addEventListener("click",u),o.btnCancelTask.addEventListener("click",(()=>{o.container.style.display="none",o.clearFields()})),o.btnConfirmProject.addEventListener("click",k),o.btnInbox.addEventListener("click",(()=>{L(c.myTasks),a.activeProject=c,o.setListTitle("INBOX")})),o.btnToday.addEventListener("click",(()=>{L(m().filter((t=>function(t){const e=(new Date).getDate();return t.getUTCDate()===e}(t.dueDate)))),a.activeProject=c,o.setListTitle("TODAY")})),o.btnWeek.addEventListener("click",(()=>{L(m().filter((t=>function(t){const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(6-e.getDay()));return t>=n&&t<=i}(t.dueDate)))),a.activeProject=c,o.setListTitle("THIS WEEK")})),o.btnNewTask.addEventListener("click",(()=>{o.container.style.display="flex"})),o.btnNewProject.addEventListener("click",(()=>{o.inputContainer.style.display="flex"})),o.btnCancelProject.addEventListener("click",(()=>{o.inputContainer.style.display="none",o.projectNameInput.value=""})),o.btnConfirmEdit.addEventListener("click",p),o.btnCancelEdit.addEventListener("click",(()=>{o.taskOverlay.style.display="none"})),o.btnLow.addEventListener("click",(()=>{r.currentPriority=0,o.updatePriority(o.btnLow,o.btnMid,o.btnHigh,0)})),o.btnMid.addEventListener("click",(()=>{r.currentPriority=1,o.updatePriority(o.btnLow,o.btnMid,o.btnHigh,1)})),o.btnHigh.addEventListener("click",(()=>{r.currentPriority=2,o.updatePriority(o.btnLow,o.btnMid,o.btnHigh,2)})),o.btnLowEdit.addEventListener("click",(()=>{r.currentPriority=0,o.updatePriority(o.btnLowEdit,o.btnMidEdit,o.btnHighEdit,0)})),o.btnMidEdit.addEventListener("click",(()=>{r.currentPriority=1,o.updatePriority(o.btnLowEdit,o.btnMidEdit,o.btnHighEdit,1)})),o.btnHighEdit.addEventListener("click",(()=>{r.currentPriority=2,o.updatePriority(o.btnLowEdit,o.btnMidEdit,o.btnHighEdit,2)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFBaUIsQ0FBQ0MsRUFBTUMsRUFBYUMsRUFBU0MsRUFBVUMsRUFBV0MsRUFBUUMsS0FDN0UsTUFBTUMsRUFBT0MsU0FBU0MsY0FBYyxPQUNwQ0YsRUFBS0csVUFBVUMsSUFBSSxRQUNuQkosRUFBS0ssR0FBSyxRQUFRUCxJQUNsQkUsRUFBS00sUUFBUUMsTUFBUVQsRUFFckIsTUFBTVUsRUFBY1AsU0FBU0MsY0FBYyxPQUNyQ08sRUFBZVIsU0FBU0MsY0FBYyxPQUM1Q00sRUFBWUwsVUFBVUMsSUFBSSxnQkFDMUJLLEVBQWFOLFVBQVVDLElBQUksaUJBRTNCLE1BQU1NLEVBQVdULFNBQVNDLGNBQWMsU0FDeENRLEVBQVNDLEtBQU8sV0FDaEJELEVBQVNFLFFBQVVmLEVBQ25CYSxFQUFTTCxHQUFLLFFBQVFQLGFBQ3RCLE1BQU1lLEVBQVlaLFNBQVNDLGNBQWMsTUFDekNXLEVBQVVDLFVBQVlyQixFQUN0Qm9CLEVBQVVSLEdBQUssUUFBUVAsU0FDdkIsTUFBTWlCLEVBQVlkLFNBQVNDLGNBQWMsUUFDekNhLEVBQVVDLFVBQVksWUFDdEJELEVBQVVELFVBQVlwQixFQUVuQkcsSUFDRGdCLEVBQVVJLE1BQU1DLGVBQWlCLGVBQ2pDTCxFQUFVSSxNQUFNRSxNQUFRLFFBRzFCWCxFQUFZWSxZQUFZVixHQUN4QkYsRUFBWVksWUFBWVAsR0FDeEJMLEVBQVlZLFlBQVlMLEdBRXhCLE1BTU1NLEVBQWdCcEIsU0FBU0MsY0FBYyxRQUM3Q21CLEVBQWNMLFVBQVksWUFDMUJLLEVBQWNsQixVQUFVQyxJQUFJLFlBQVlSLEtBQ3hDeUIsRUFBY1AsVUFBWSxHQVROLENBQ2xCLEVBQUcsTUFDSCxFQUFHLE1BQ0gsRUFBRyxRQU1vQ2xCLGNBRXpDLE1BQU0wQixFQUFVckIsU0FBU0MsY0FBYyxPQUN2Q29CLEVBQVFOLFVBQVksVUFFcEIsTUFBTU8sRUFBT3RCLFNBQVNDLGNBQWMsUUFFbENxQixFQUFLVCxVQURRLEtBQVpuQixFQUNnQixjQUVBLGFBQWFBLEVBQVE2QixnQkFBZ0I3QixFQUFROEIsV0FBYSxLQUFLOUIsRUFBUStCLGdCQUcxRixNQUFNQyxFQUFPMUIsU0FBU0MsY0FBYyxPQUNwQ3lCLEVBQUtDLGlCQUFpQixRQUFTN0IsR0FDL0I0QixFQUFLeEIsVUFBVUMsSUFBSSxTQUNuQnVCLEVBQUtFLElBQU0sb0JBQ1hGLEVBQUtHLElBQU0sT0FDWEgsRUFBS3RCLEdBQUssYUFBYVAsSUFFdkIsTUFBTWlDLEVBQVM5QixTQUFTQyxjQUFjLE9BZ0J0QyxPQWZBNkIsRUFBTzVCLFVBQVVDLElBQUksU0FDckIyQixFQUFPRixJQUFNLHNCQUNiRSxFQUFPekIsUUFBUUMsTUFBUVQsRUFDdkJpQyxFQUFPRCxJQUFNLElBQ2JDLEVBQU8xQixHQUFLLGVBQWVQLElBRTNCVyxFQUFhVyxZQUFZQyxHQUN6QlosRUFBYVcsWUFBWUUsR0FDekJiLEVBQWFXLFlBQVlHLEdBQ3pCZCxFQUFhVyxZQUFZTyxHQUN6QmxCLEVBQWFXLFlBQVlXLEdBRXpCL0IsRUFBS29CLFlBQVlaLEdBQ2pCUixFQUFLb0IsWUFBWVgsR0FFVlQsQ0FBSSxFQUdUZ0MsRUFBb0IsQ0FBQ3ZDLEVBQU13QyxLQUMvQixNQUFNQyxFQUFVakMsU0FBU0MsY0FBYyxNQUN2Q2dDLEVBQVE3QixHQUFLLFdBQVc0QixJQUN4QixNQUFNRSxFQUFnQmxDLFNBQVNDLGNBQWMsT0FDN0NpQyxFQUFjN0IsUUFBUUMsTUFBUTBCLEVBQzlCLE1BQU1HLEVBQWNuQyxTQUFTQyxjQUFjLE9BQzNDa0MsRUFBWVAsSUFBTSx1QkFDbEJPLEVBQVlOLElBQU0sSUFDbEIsTUFBTU8sRUFBY3BDLFNBQVNDLGNBQWMsUUFDM0NtQyxFQUFZdkIsVUFBWXJCLEVBQ3hCLE1BQU02QyxFQUFhckMsU0FBU0MsY0FBYyxPQVUxQyxPQVRBb0MsRUFBV25DLFVBQVVDLElBQUksU0FDekJrQyxFQUFXVCxJQUFNLHNCQUNqQlMsRUFBV1IsSUFBTSxJQUVqQkssRUFBY2YsWUFBWWdCLEdBQzFCRCxFQUFjZixZQUFZaUIsR0FDMUJILEVBQVFkLFlBQVllLEdBQ3BCRCxFQUFRZCxZQUFZa0IsR0FFYkosQ0FBTyxFQ2hEaEIsRUFsREEsTUFDRUssWUFBWTlDLEVBQU1DLEVBQWFDLEVBQVNDLEVBQVVDLEdBQVksR0FDNUQyQyxLQUFLL0MsS0FBT0EsRUFDWitDLEtBQUs5QyxZQUFjQSxFQUNuQjhDLEtBQUs3QyxRQUFVQSxFQUNmNkMsS0FBSzVDLFNBQVdBLEVBQ2hCNEMsS0FBSzNDLFVBQVlBLENBQ25CLENBRUlKLFdBQ0YsT0FBTytDLEtBQUtDLEtBQ2QsQ0FFSWhELFNBQUtpRCxHQUNQRixLQUFLQyxNQUFRQyxDQUNmLENBRUloRCxrQkFDRixPQUFPOEMsS0FBS0csWUFDZCxDQUVJakQsZ0JBQVlrRCxHQUNkSixLQUFLRyxhQUFlQyxDQUN0QixDQUVJakQsY0FDRixPQUFPNkMsS0FBS0ssUUFDZCxDQUVJbEQsWUFBUTRCLEdBQ1ZpQixLQUFLSyxTQUFXdEIsQ0FDbEIsQ0FFSTNCLGVBQ0YsT0FBTzRDLEtBQUtNLFNBQ2QsQ0FFSWxELGFBQVNtRCxHQUNYUCxLQUFLTSxVQUFZQyxDQUNuQixDQUVJbEQsZ0JBQ0YsT0FBTzJDLEtBQUtRLFVBQ2QsQ0FFSW5ELGNBQVVvRCxHQUNaVCxLQUFLUSxXQUFhQyxDQUNwQixHQ05GLEVBeENBLE1BQ0VWLFlBQVk5QyxHQUNWK0MsS0FBSy9DLEtBQU9BLEVBQ1orQyxLQUFLVSxRQUFVLEdBQ2ZWLEtBQUtXLFlBQWEsQ0FDcEIsQ0FFSTFELFdBQ0YsT0FBTytDLEtBQUtDLEtBQ2QsQ0FFSWhELFNBQUsyRCxHQUNQWixLQUFLQyxNQUFRVyxDQUNmLENBRUlGLGNBQ0YsT0FBT1YsS0FBS2EsUUFDZCxDQUVJSCxZQUFRSSxHQUNWZCxLQUFLYSxTQUFXQyxDQUNsQixDQUVBQyxRQUFRdkQsR0FDTndDLEtBQUtVLFFBQVFNLEtBQUt4RCxFQUNwQixDQUVJbUQsaUJBQ0YsT0FBT1gsS0FBS2lCLFdBQ2QsQ0FFSU4sZUFBV08sR0FDYmxCLEtBQUtpQixZQUFjQyxDQUNyQixDQUVBQyxXQUFXM0QsR0FDVHdDLEtBQUtVLFFBQVFVLE9BQU9wQixLQUFLVSxRQUFRVyxRQUFRN0QsR0FBTyxFQUNsRCxHQzlCRixTQUFTOEQsRUFBYUMsRUFBYUMsR0FSbkMsSUFBNEI5QixFQVMxQitCLGFBQWFDLFFBQVEsV0FBWUMsS0FBS0MsVUFBVUwsSUFUdEI3QixFQVVQOEIsRUFUbkJDLGFBQWFDLFFBQVEsaUJBQWtCQyxLQUFLQyxVQUFVbEMsR0FVeEQsQ0NOQSxNQUFNLEVKZ0dNLE1BRVYsTUFBTW1DLEVBQVdwRSxTQUFTcUUsZUFBZSxhQUNuQ0MsRUFBV3RFLFNBQVNxRSxlQUFlLGFBQ25DRSxFQUFVdkUsU0FBU3FFLGVBQWUsWUFHbENHLEVBQWdCeEUsU0FBU3FFLGVBQWUsbUJBQ3hDSSxFQUFpQnpFLFNBQVNxRSxlQUFlLG1CQUN6Q0ssRUFBbUIxRSxTQUFTcUUsZUFBZSxzQkFDM0NNLEVBQW9CM0UsU0FBU3FFLGVBQWUsNEJBQzVDTyxFQUFtQjVFLFNBQVNxRSxlQUFlLGtCQUczQ1EsRUFBWTdFLFNBQVNxRSxlQUFlLG1CQUNwQ1MsRUFBYTlFLFNBQVNxRSxlQUFlLGdCQUdyQ1UsRUFBWS9FLFNBQVNnRixjQUFjLGdCQUNuQ0MsRUFBUWpGLFNBQVNxRSxlQUFlLGVBQ2hDNUUsRUFBY08sU0FBU3FFLGVBQWUscUJBQ3RDL0MsRUFBT3RCLFNBQVNxRSxlQUFlLGNBQy9CYSxFQUFTbEYsU0FBU3FFLGVBQWUsV0FDakNjLEVBQVNuRixTQUFTcUUsZUFBZSxXQUNqQ2UsRUFBVXBGLFNBQVNxRSxlQUFlLFlBQ2xDZ0IsRUFBYXJGLFNBQVNxRSxlQUFlLGdCQUNyQ2lCLEVBQWdCdEYsU0FBU3FFLGVBQWUsbUJBSXhDa0IsRUFBY3ZGLFNBQVNnRixjQUFjLHNCQUNyQ1EsRUFBWXhGLFNBQVNxRSxlQUFlLG9CQUNwQ29CLEVBQWtCekYsU0FBU3FFLGVBQWUsMEJBQzFDcUIsRUFBVzFGLFNBQVNxRSxlQUFlLG1CQUNuQ3NCLEVBQWEzRixTQUFTcUUsZUFBZSxnQkFDckN1QixFQUFhNUYsU0FBU3FFLGVBQWUsZ0JBQ3JDd0IsRUFBYzdGLFNBQVNxRSxlQUFlLGlCQUN0Q3lCLEVBQWlCOUYsU0FBU3FFLGVBQWUsb0JBQ3pDMEIsRUFBZ0IvRixTQUFTcUUsZUFBZSxtQkFHeEMyQixFQUFvQmhHLFNBQVNxRSxlQUFlLGdCQUM1QzRCLEVBQWlCakcsU0FBU2dGLGNBQWMsY0FvQjlDLFNBQVNrQixFQUFZekQsR0FDbkJ3QyxFQUFNOUIsTUFBUVYsQ0FDaEIsQ0FNQSxTQUFTMEQsRUFBZXhELEdBQ3RCbEQsRUFBWTBELE1BQVFSLENBQ3RCLENBTUEsU0FBU3lELEVBQVFDLEdBQ2YvRSxFQUFLNkIsTUFBUWtELENBQ2YsQ0FNQSxTQUFTQyxFQUFlQyxFQUFLQyxFQUFLQyxFQUFNOUcsR0FDdEIsSUFBYkEsR0FDRDRHLEVBQUlyRyxVQUFVQyxJQUFJLG1CQUNsQnFHLEVBQUl0RyxVQUFVNEIsT0FBTyxtQkFDckIyRSxFQUFLdkcsVUFBVTRCLE9BQU8scUJBQ0QsSUFBYm5DLEdBQ1I2RyxFQUFJdEcsVUFBVUMsSUFBSSxtQkFDbEJvRyxFQUFJckcsVUFBVTRCLE9BQU8sbUJBQ3JCMkUsRUFBS3ZHLFVBQVU0QixPQUFPLHFCQUNELElBQWJuQyxHQUNSOEcsRUFBS3ZHLFVBQVVDLElBQUksb0JBQ25Cb0csRUFBSXJHLFVBQVU0QixPQUFPLG1CQUNyQjBFLEVBQUl0RyxVQUFVNEIsT0FBTyxxQkFFckIyRSxFQUFLdkcsVUFBVTRCLE9BQU8sb0JBQ3RCeUUsRUFBSXJHLFVBQVU0QixPQUFPLG1CQUNyQjBFLEVBQUl0RyxVQUFVNEIsT0FBTyxtQkFFekIsQ0F3QkEsTUFBTyxDQUFFdkMsaUJBQWdCd0Msb0JBQW1CcUMsV0FBVUUsV0FBVUMsVUFBU0MsZ0JBQWVPLFlBQy9FTixpQkFBZ0JDLG1CQUFrQkMsb0JBQW1CQyxtQkFBa0JFLGFBQVlJLFNBQVFDLFNBQzNGQyxVQUFTQyxhQUFZQyxnQkFBZVUsb0JBQW1CQyxpQkFBZ0JWLGNBQ3ZFbUIsWUFqRlQsU0FBcUIzRyxHQUNuQmtHLEVBQWU5RSxZQUFZcEIsRUFDN0IsRUErRXNCNEcsZUE3RXRCLFNBQXdCMUUsR0FDdEIrRCxFQUFrQjdFLFlBQVljLEVBQ2hDLEVBMkVzQzJFLFlBekV0QyxXQUNFLE9BQU8zQixFQUFNOUIsS0FDZixFQXVFbUQrQyxjQUFhVyxlQXRGaEUsV0FDRSxPQUFPbkMsRUFBaUJ2QixLQUMxQixFQW9GZ0YyRCxlQWpFaEYsV0FDRSxPQUFPckgsRUFBWTBELEtBQ3JCLEVBZ0VTZ0QsaUJBQWdCWSxRQTFEekIsV0FDRSxPQUFPekYsRUFBSzZCLEtBQ2QsRUF3RGtDaUQsVUFBU1osWUFBV0Msa0JBQWlCQyxXQUFVQyxhQUFZQyxhQUNwRkMsY0FBYUMsaUJBQWdCQyxnQkFBZWlCLGFBbkRyRCxTQUFzQkMsR0FDcEJwQyxFQUFVaEUsVUFBWW9HLENBQ3hCLEVBaURtRVgsaUJBQWdCWSxZQTFCbkYsV0FDRWhCLEVBQVksSUFDWkMsRUFBZSxJQUNmQyxFQUFRLElBQ1JFLEVBQWVwQixFQUFRQyxFQUFRQyxFQUFTLElBQ3hDa0IsRUFBZVgsRUFBWUMsRUFBWUMsRUFBYSxHQUN0RCxFQXFCU3NCLHdCQW5CVCxXQUNFLE1BQU1DLEVBQU9wSCxTQUFTQyxjQUFjLE1BQ3BDbUgsRUFBS3ZHLFVBQVksa0JBQ2pCdUcsRUFBS3BHLE1BQU1FLE1BQVEsT0FDbkIrRSxFQUFlOUUsWUFBWWlHLEVBQzdCLEVBY2tDQywyQkFabEMsV0FDRSxNQUFNRCxFQUFPcEgsU0FBU0MsY0FBYyxNQUNwQ21ILEVBQUt2RyxVQUFZLGtCQUNqQm1GLEVBQWtCN0UsWUFBWWlHLEVBQ2hDLEVBUThELEVJdE9oRCxHQUVWckQsRUFBaUIsSUFBSSxFQUFRLFNBRTdCdUQsRUFBaUIsQ0FDckJDLFNBQVUsR0FDVkMsY0FBZXpELEdBR1gwRCxFQUFjLENBQ2xCQyxnQkFBWUMsRUFDWkMsZ0JBQWlCLEdBR25CLFNBQVNDLEVBQWE5SCxHQUNwQixPQUFPLElBQUksRUFBS0EsRUFBS3lDLE1BQU96QyxFQUFLMkMsYUFBYyxJQUFJb0YsS0FBSy9ILEVBQUs2QyxVQUFXN0MsRUFBSzhDLFVBQVc5QyxFQUFLZ0QsV0FDL0YsQ0FFQSxTQUFTZ0YsRUFBZ0I5RixHQUN2QixPQUFPLElBQUksRUFBUUEsRUFBUU8sTUFDN0IsQ0FFQSxHQUFHLGFBQWN3QixhQUFjLENBQzdCLE1BQU1nRSxFRHZCQzlELEtBQUsrRCxNQUFNakUsYUFBYUQsZ0JDdUJXWCxTQUMxQyxJQUFJLE1BQU1yRCxLQUFRaUksRUFDaEJqRSxFQUFlZCxRQUFRTSxLQUFLc0UsRUFBYTlILElBRzNDLE1BQU1tSSxFRG5CQ2hFLEtBQUsrRCxNQUFNakUsYUFBYW1FLFFBQVEsYUNvQnZDLElBQUksTUFBTWxHLEtBQVdpRyxFQUFpQixDQUNwQyxNQUFNRSxFQUFnQkwsRUFBZ0I5RixHQUV0QyxJQUFJLE1BQU1sQyxLQUFRa0MsRUFBUW1CLFNBQ3hCZ0YsRUFBY25GLFFBQVFNLEtBQUtzRSxFQUFhOUgsSUFHMUN1SCxFQUFlQyxTQUFTaEUsS0FBSzZFLEVBQy9CLENBQ0YsQ0FFQSxTQUFTQyxJQUNQLE1BQU1DLEVBQVEsR0FFZEEsRUFBTS9FLEtBQUtRLEVBQWVkLFNBRTFCLElBQUksTUFBTWhCLEtBQVdxRixFQUFlQyxTQUNsQ2UsRUFBTS9FLEtBQUt0QixFQUFRZ0IsU0FHckIsT0FBT3FGLEVBQU1DLE1BQ2YsQ0FlQSxTQUFTQyxJQUNQLEdBQTZCLEtBQTFCLEVBQVE1QixjQUFzQixDQUMvQixNQUFNcEgsRUFBTyxFQUFRb0gsY0FDZm5ILEVBQWMsRUFBUXFILGlCQUN0QnhGLEVBQU8sSUFBSXdHLEtBQUssR0FBRyxFQUFRZixhQUMzQmhILEVBQU8sSUFBSSxFQUFLUCxFQUFNQyxFQUFhNkIsRUFBTW1HLEVBQVlHLGlCQUFpQixHQUM1RU4sRUFBZUUsY0FBY3ZFLFFBQVFNLEtBQUt4RCxHQUMxQzBJLEVBQWdCbkIsRUFBZUUsY0FBY3ZFLFNBQzdDLEVBQVE4QixVQUFVL0QsTUFBTTBILFFBQVUsT0FDbEMsRUFBUXhCLGNBQ1JyRCxFQUFheUQsRUFBZUMsU0FBVXhELEVBQ3hDLENBQ0YsQ0FFQSxTQUFTNEUsSUFDUCxFQUFRcEQsWUFBWXZFLE1BQU0wSCxRQUFVLE9BQ3BDLE1BQU0zSSxFQUFPMEgsRUFBWUMsV0FDekIzSCxFQUFLUCxLQUFPLEVBQVFnRyxVQUFVckMsTUFDOUJwRCxFQUFLTixZQUFjLEVBQVFnRyxnQkFBZ0J0QyxNQUMzQ3BELEVBQUtKLFNBQVc4SCxFQUFZRyxnQkFDNUI3SCxFQUFLdUIsS0FBTyxFQUFRb0UsU0FBU3ZDLE1BQzdCc0YsRUFBZ0JuQixFQUFlRSxjQUFjdkUsU0FDN0NZLEVBQWF5RCxFQUFlQyxTQUFVeEQsRUFDeEMsQ0FFQSxTQUFTNkUsRUFBZ0I3SSxHQUN2QixPQUFPLFdBQ0wsRUFBUXdGLFlBQVl2RSxNQUFNMEgsUUFBVSxPQUNwQ2pCLEVBQVlDLFdBQWEzSCxFQUN6QixFQUFReUYsVUFBVXJDLE1BQVFwRCxFQUFLUCxLQUMvQixFQUFRaUcsZ0JBQWdCdEMsTUFBUXBELEVBQUtOLFlBQ3JDLEVBQVE2RyxlQUFlLEVBQVFYLFdBQVksRUFBUUMsV0FBWSxFQUFRQyxZQUFhOUYsRUFBS0osVUFDckUsS0FBakJJLEVBQUtMLFVBQ04sRUFBUWdHLFNBQVN2QyxNQUFRcEQsRUFBS0wsUUFBUW1KLGNBQWNDLE1BQU0sS0FBSyxHQUVuRSxDQUNGLENBRUEsU0FBU0MsRUFBcUI5RyxHQUM1QixPQUFPLFdBQ0xxRixFQUFlQyxTQUFTNUQsT0FBTzFCLEVBQVMsR0FDeENqQyxTQUFTcUUsZUFBZSxXQUFXcEMsS0FBV0gsU0FDOUN3RixFQUFlRSxjQUFnQnpELEVBQy9CLEVBQVFpRCxhQUFhTSxFQUFlRSxjQUFjaEksTUFDbERpSixFQUFnQm5CLEVBQWVFLGNBQWN2RSxTQUM3Q1ksRUFBYXlELEVBQWVDLFNBQVV4RCxFQUN4QyxDQUNGLENBRUEsU0FBU2lGLEVBQXFCL0csR0FDNUIsT0FBTyxXQUNMcUYsRUFBZUUsY0FBZ0JGLEVBQWVDLFNBQVN0RixHQUN2RCxFQUFRK0UsYUFBYU0sRUFBZUUsY0FBY2hJLE1BQ2xEaUosRUFBZ0JuQixFQUFlRSxjQUFjdkUsUUFDL0MsQ0FDRixDQUVBLFNBQVNnRyxJQUNQLEdBQWdDLEtBQTdCLEVBQVFwQyxpQkFBeUIsQ0FDbEMsTUFBTXJILEVBQU8sRUFBUXFILGlCQUNyQlMsRUFBZUMsU0FBU2hFLEtBQUssSUFBSSxFQUFRL0QsSUFDekM4SCxFQUFlRSxjQUFnQkYsRUFBZUMsU0FBU0QsRUFBZUMsU0FBUzJCLE9BQU8sR0FDdEZDLEVBQWE3QixFQUFlQyxVQUM1QixFQUFRUCxhQUFhTSxFQUFlRSxjQUFjaEksTUFDbEQsRUFBUWlGLGVBQWV6RCxNQUFNMEgsUUFBVSxHQUN2QyxFQUFRaEUsaUJBQWlCdkIsTUFBUSxHQUNqQ1UsRUFBYXlELEVBQWVDLFNBQVV4RCxHQUN0QzBFLEVBQWdCbkIsRUFBZUUsY0FBY3ZFLFFBQy9DLENBQ0YsQ0FFQSxTQUFTbUcsRUFBYXJKLEdBQ3BCLE1BQU1QLEVBQU9RLFNBQVNxRSxlQUFlLFFBQVF0RSxFQUFLTSxRQUFRQyxjQUMxRCtILElBQWN0SSxFQUFLTSxRQUFRQyxPQUFPVixXQUFZLEVBQzlDSixFQUFLd0IsTUFBTUMsZUFBaUIsZUFDNUJ6QixFQUFLd0IsTUFBTUUsTUFBUSxNQUNyQixDQUVBLFNBQVNtSSxFQUFhdEosR0FDcEIsTUFBTVAsRUFBT1EsU0FBU3FFLGVBQWUsUUFBUXRFLEVBQUtNLFFBQVFDLGNBQzFEK0gsSUFBY3RJLEVBQUtNLFFBQVFDLE9BQU9WLFdBQVksRUFDOUNKLEVBQUt3QixNQUFNQyxlQUFpQixPQUM1QnpCLEVBQUt3QixNQUFNRSxNQUFRLEVBQ3JCLENBNkNBLFNBQVN1SCxFQUFnQmEsSUEzQ3pCLFNBQW1CakcsR0FDakIsS0FBTSxFQUFRNEMsZUFBZXNELFlBQzNCLEVBQVF0RCxlQUFldUQsWUFBWSxFQUFRdkQsZUFBZXNELFlBSTVELElBQUksTUFBTXhKLEtBQVFzRCxFQUNoQm9FLEVBQVlDLFdBQWEzSCxFQUN0QjBKLE1BQU0xSixFQUFLTCxRQUFRcUgsV0FDcEIsRUFBUUwsWUFBWSxFQUFRbkgsZUFBZVEsRUFBS1AsS0FBTU8sRUFBS04sWUFBYSxHQUFJTSxFQUFLSixTQUFVSSxFQUFLSCxVQUFXeUQsRUFBS08sUUFBUTdELEdBQU82SSxFQUFnQm5CLEVBQVlDLGNBRTNKLEVBQVFoQixZQUFZLEVBQVFuSCxlQUFlUSxFQUFLUCxLQUFNTyxFQUFLTixZQUFhTSxFQUFLTCxRQUFTSyxFQUFLSixTQUFVSSxFQUFLSCxVQUFXeUQsRUFBS08sUUFBUTdELEdBQU82SSxFQUFnQm5CLEVBQVlDLGNBS3pLLElBQUksTUFBTTNILEtBQVEySixNQUFNQyxLQUFLLEVBQVExRCxlQUFlMkQsWUFBYSxDQUMvRCxNQUFNdEosRUFBUVAsRUFBS00sUUFBUUMsTUFDckJHLEVBQVdULFNBQVNxRSxlQUFlLFFBQVEvRCxjQUNsQ04sU0FBU3FFLGVBQWUsZUFBZS9ELEtBRS9DcUIsaUJBQWlCLFNBQVMsS0FDL0IyRixFQUFlRSxjQUFjOUQsV0FBVzRELEVBQWVFLGNBQWN2RSxRQUFRM0MsSUFDN0VQLEVBQUsrQixTQUNMMkcsRUFBZ0JuQixFQUFlRSxjQUFjdkUsUUFBUSxJQUd2RHhDLEVBQVNrQixpQkFBaUIsU0FBUyxLQUM3QmxCLEVBQVNFLFFBR1h5SSxFQUFhckosR0FGYnNKLEVBQWF0SixHQUtmOEQsRUFBYXlELEVBQWVDLFNBQVV4RCxFQUFlLEdBRXpELENBRW1CLElBQWhCVixFQUFLNkYsUUFDTixFQUFRL0IseUJBRVosQ0FHRTBDLENBQVVQLEVBQ1osQ0FFQSxTQUFTSCxFQUFhOUYsR0FDcEIsS0FBTSxFQUFRMkMsa0JBQWtCdUQsWUFDOUIsRUFBUXZELGtCQUFrQndELFlBQVksRUFBUXhELGtCQUFrQnVELFlBR2xFLElBQUksTUFBTXRILEtBQVdvQixFQUNuQixFQUFRc0QsZUFBZSxFQUFRNUUsa0JBQWtCRSxFQUFRekMsS0FBTTZELEVBQUtPLFFBQVEzQixLQUc5RSxJQUFJLE1BQU1BLEtBQVd5SCxNQUFNQyxLQUFLLEVBQVEzRCxrQkFBa0I0RCxZQUFhLENBQ3JFLE1BQU05SCxFQUFTRyxFQUFRMkgsV0FBVyxHQUM1QnRKLEVBQVEyQixFQUFRMkgsV0FBVyxHQUFHdkosUUFBUUMsTUFDNUN3QixFQUFPSCxpQkFBaUIsUUFBU29ILEVBQXFCekksSUFDdEQyQixFQUFRMkgsV0FBVyxHQUFHakksaUJBQWlCLFFBQVNxSCxFQUFxQjFJLEdBQ3ZFLENBRW1CLElBQWhCK0MsRUFBSzZGLFFBQ04sRUFBUTdCLDRCQUVaLENBbUZJb0IsRUFBZ0IxRSxFQUFlZCxTQUMvQmtHLEVBQWE3QixFQUFlQyxVQWpGOUIsRUFBUWxDLFdBQVcxRCxpQkFBaUIsUUFBUzZHLEdBRTdDLEVBQVFsRCxjQUFjM0QsaUJBQWlCLFNBQVMsS0FDOUMsRUFBUW9ELFVBQVUvRCxNQUFNMEgsUUFBVSxPQUNsQyxFQUFReEIsYUFBYSxJQUd2QixFQUFRdkMsa0JBQWtCaEQsaUJBQWlCLFFBQVNzSCxHQUVwRCxFQUFRN0UsU0FBU3pDLGlCQUFpQixTQUFTLEtBQ3pDOEcsRUFBZ0IxRSxFQUFlZCxTQUMvQnFFLEVBQWVFLGNBQWdCekQsRUFDL0IsRUFBUWlELGFBQWEsUUFBUSxJQUcvQixFQUFRMUMsU0FBUzNDLGlCQUFpQixTQUFTLEtBRXpDOEcsRUFEbUJKLElBQWN5QixRQUFPL0osR0F2TDVDLFNBQWlCdUIsR0FDZixNQUFNeUksR0FBYyxJQUFJakMsTUFBT2YsVUFDL0IsT0FBT3pGLEVBQUtDLGVBQWlCd0ksQ0FDL0IsQ0FvTG9EQyxDQUFRakssRUFBS0wsWUFFN0Q0SCxFQUFlRSxjQUFnQnpELEVBQy9CLEVBQVFpRCxhQUFhLFFBQVEsSUFHL0IsRUFBUXpDLFFBQVE1QyxpQkFBaUIsU0FBUyxLQUV4QzhHLEVBRGtCSixJQUFjeUIsUUFBTy9KLEdBekwzQyxTQUFvQnVCLEdBQ2xCLE1BQU15SSxFQUFjLElBQUlqQyxLQUNsQm1DLEVBQVksSUFBSW5DLEtBQUtpQyxFQUFZdEksY0FBZXNJLEVBQVl2SSxXQUFZdUksRUFBWWhELFVBQVlnRCxFQUFZRyxVQUM1R0MsRUFBVSxJQUFJckMsS0FBS2lDLEVBQVl0SSxjQUFlc0ksRUFBWXZJLFdBQVl1SSxFQUFZaEQsV0FBYSxFQUFJZ0QsRUFBWUcsV0FFckgsT0FBTzVJLEdBQVEySSxHQUFhM0ksR0FBUTZJLENBQ3RDLENBbUxtREMsQ0FBV3JLLEVBQUtMLFlBRS9ENEgsRUFBZUUsY0FBZ0J6RCxFQUMvQixFQUFRaUQsYUFBYSxZQUFZLElBR25DLEVBQVFsQyxXQUFXbkQsaUJBQWlCLFNBQVMsS0FDM0MsRUFBUW9ELFVBQVUvRCxNQUFNMEgsUUFBVSxNQUFNLElBRzFDLEVBQVFsRSxjQUFjN0MsaUJBQWlCLFNBQVMsS0FDOUMsRUFBUThDLGVBQWV6RCxNQUFNMEgsUUFBVSxNQUFNLElBRy9DLEVBQVE5RCxpQkFBaUJqRCxpQkFBaUIsU0FBUyxLQUNqRCxFQUFROEMsZUFBZXpELE1BQU0wSCxRQUFVLE9BQ3ZDLEVBQVFoRSxpQkFBaUJ2QixNQUFRLEVBQUUsSUFHckMsRUFBUTJDLGVBQWVuRSxpQkFBaUIsUUFBU2dILEdBRWpELEVBQVE1QyxjQUFjcEUsaUJBQWlCLFNBQVMsS0FDOUMsRUFBUTRELFlBQVl2RSxNQUFNMEgsUUFBVSxNQUFNLElBRzVDLEVBQVF4RCxPQUFPdkQsaUJBQWlCLFNBQVMsS0FDdkM4RixFQUFZRyxnQkFBa0IsRUFDOUIsRUFBUXRCLGVBQWUsRUFBUXBCLE9BQVEsRUFBUUMsT0FBUSxFQUFRQyxRQUFTLEVBQUUsSUFHNUUsRUFBUUQsT0FBT3hELGlCQUFpQixTQUFTLEtBQ3ZDOEYsRUFBWUcsZ0JBQWtCLEVBQzlCLEVBQVF0QixlQUFlLEVBQVFwQixPQUFRLEVBQVFDLE9BQVEsRUFBUUMsUUFBUyxFQUFFLElBRzVFLEVBQVFBLFFBQVF6RCxpQkFBaUIsU0FBUyxLQUN4QzhGLEVBQVlHLGdCQUFrQixFQUM5QixFQUFRdEIsZUFBZSxFQUFRcEIsT0FBUSxFQUFRQyxPQUFRLEVBQVFDLFFBQVMsRUFBRSxJQUc1RSxFQUFRTyxXQUFXaEUsaUJBQWlCLFNBQVMsS0FDM0M4RixFQUFZRyxnQkFBa0IsRUFDOUIsRUFBUXRCLGVBQWUsRUFBUVgsV0FBWSxFQUFRQyxXQUFZLEVBQVFDLFlBQWEsRUFBRSxJQUd4RixFQUFRRCxXQUFXakUsaUJBQWlCLFNBQVMsS0FDM0M4RixFQUFZRyxnQkFBa0IsRUFDOUIsRUFBUXRCLGVBQWUsRUFBUVgsV0FBWSxFQUFRQyxXQUFZLEVBQVFDLFlBQWEsRUFBRSxJQUd4RixFQUFRQSxZQUFZbEUsaUJBQWlCLFNBQVMsS0FDNUM4RixFQUFZRyxnQkFBa0IsRUFDOUIsRUFBUXRCLGVBQWUsRUFBUVgsV0FBWSxFQUFRQyxXQUFZLEVBQVFDLFlBQWEsRUFBRSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rhc2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcFN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50Q29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0YXNrRGl2RmFjdG9yeSA9IChuYW1lLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlZCwgdGFza0lkLCBlZGl0SGFuZGxlcikgPT4ge1xuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YXNrLmNsYXNzTGlzdC5hZGQoJ3Rhc2snKTtcbiAgICB0YXNrLmlkID0gYHRhc2stJHt0YXNrSWR9YDtcbiAgICB0YXNrLmRhdGFzZXQuaW5kZXggPSB0YXNrSWQ7XG5cbiAgICBjb25zdCBsZWZ0U2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHJpZ2h0U2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxlZnRTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2xlZnQtc2VjdGlvbicpO1xuICAgIHJpZ2h0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdyaWdodC1zZWN0aW9uJyk7XG5cbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgY2hlY2tib3guY2hlY2tlZCA9IGNvbXBsZXRlZDtcbiAgICBjaGVja2JveC5pZCA9IGB0YXNrLSR7dGFza0lkfS1jaGVja2JveGA7XG4gICAgY29uc3QgbGFiZWxOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICBsYWJlbE5hbWUuaW5uZXJIVE1MID0gbmFtZTtcbiAgICBsYWJlbE5hbWUuaWQgPSBgdGFzay0ke3Rhc2tJZH0tbmFtZWA7XG4gICAgY29uc3QgbGFiZWxEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGxhYmVsRGVzYy5jbGFzc05hbWUgPSAndGFzay1zcGFuJztcbiAgICBsYWJlbERlc2MuaW5uZXJIVE1MID0gZGVzY3JpcHRpb247XG5cbiAgICBpZihjb21wbGV0ZWQpIHtcbiAgICAgIGxhYmVsTmFtZS5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICAgICAgbGFiZWxOYW1lLnN0eWxlLmNvbG9yID0gJ2dyYXknO1xuICAgIH1cblxuICAgIGxlZnRTZWN0aW9uLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICBsZWZ0U2VjdGlvbi5hcHBlbmRDaGlsZChsYWJlbE5hbWUpO1xuICAgIGxlZnRTZWN0aW9uLmFwcGVuZENoaWxkKGxhYmVsRGVzYyk7XG5cbiAgICBjb25zdCBwcmlvcml0eUxpYiA9IHtcbiAgICAgIDA6IFwiTE9XXCIsXG4gICAgICAxOiBcIk1JRFwiLFxuICAgICAgMjogXCJISUdIXCJcbiAgICB9O1xuXG4gICAgY29uc3QgbGFiZWxQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBsYWJlbFByaW9yaXR5LmNsYXNzTmFtZSA9ICd0YXNrLXNwYW4nO1xuICAgIGxhYmVsUHJpb3JpdHkuY2xhc3NMaXN0LmFkZChgcHJpb3JpdHktJHtwcmlvcml0eX1gKTtcbiAgICBsYWJlbFByaW9yaXR5LmlubmVySFRNTCA9IGAke3ByaW9yaXR5TGliW3ByaW9yaXR5XX0gUFJJT1JJVFlgO1xuXG4gICAgY29uc3QgZGl2aXNvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdmlzb3IuY2xhc3NOYW1lID0gJ2Rpdmlzb3InO1xuXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBpZihkdWVEYXRlID09PSAnJykge1xuICAgICAgZGF0ZS5pbm5lckhUTUwgPSBgTm8gZHVlIGRhdGVgO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlLmlubmVySFRNTCA9IGBEdWUgRGF0ZTogJHtkdWVEYXRlLmdldFVUQ0RhdGUoKX0vJHtkdWVEYXRlLmdldE1vbnRoKCkgKyAxfS8ke2R1ZURhdGUuZ2V0RnVsbFllYXIoKX1gO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBlZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRIYW5kbGVyKTtcbiAgICBlZGl0LmNsYXNzTGlzdC5hZGQoJ3NtYWxsJyk7XG4gICAgZWRpdC5zcmMgPSAnLi9hc3NldHMvZWRpdC5wbmcnO1xuICAgIGVkaXQuYWx0ID0gJ0VkaXQnO1xuICAgIGVkaXQuaWQgPSBgZWRpdC10YXNrLSR7dGFza0lkfWA7XG5cbiAgICBjb25zdCByZW1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICByZW1vdmUuY2xhc3NMaXN0LmFkZCgnc21hbGwnKTtcbiAgICByZW1vdmUuc3JjID0gJy4vYXNzZXRzL3JlbW92ZS5wbmcnO1xuICAgIHJlbW92ZS5kYXRhc2V0LmluZGV4ID0gdGFza0lkO1xuICAgIHJlbW92ZS5hbHQgPSAnWCc7XG4gICAgcmVtb3ZlLmlkID0gYHJlbW92ZS10YXNrLSR7dGFza0lkfWA7XG5cbiAgICByaWdodFNlY3Rpb24uYXBwZW5kQ2hpbGQobGFiZWxQcmlvcml0eSk7XG4gICAgcmlnaHRTZWN0aW9uLmFwcGVuZENoaWxkKGRpdmlzb3IpO1xuICAgIHJpZ2h0U2VjdGlvbi5hcHBlbmRDaGlsZChkYXRlKTtcbiAgICByaWdodFNlY3Rpb24uYXBwZW5kQ2hpbGQoZWRpdCk7XG4gICAgcmlnaHRTZWN0aW9uLmFwcGVuZENoaWxkKHJlbW92ZSk7XG5cbiAgICB0YXNrLmFwcGVuZENoaWxkKGxlZnRTZWN0aW9uKTtcbiAgICB0YXNrLmFwcGVuZENoaWxkKHJpZ2h0U2VjdGlvbik7XG5cbiAgICByZXR1cm4gdGFzaztcbn07XG5cbmNvbnN0IHByb2plY3REaXZGYWN0b3J5ID0gKG5hbWUsIHByb2plY3RJZCkgPT4ge1xuICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgcHJvamVjdC5pZCA9IGBwcm9qZWN0LSR7cHJvamVjdElkfWA7XG4gIGNvbnN0IGxlZnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgbGVmdENvbnRhaW5lci5kYXRhc2V0LmluZGV4ID0gcHJvamVjdElkO1xuICBjb25zdCBwcm9qZWN0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICBwcm9qZWN0SWNvbi5zcmMgPSAnLi9hc3NldHMvcHJvamVjdC5wbmcnO1xuICBwcm9qZWN0SWNvbi5hbHQgPSAnTyc7XG4gIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBwcm9qZWN0TmFtZS5pbm5lckhUTUwgPSBuYW1lO1xuICBjb25zdCBkZWxldGVJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZCgnc21hbGwnKTtcbiAgZGVsZXRlSWNvbi5zcmMgPSAnLi9hc3NldHMvcmVtb3ZlLnBuZyc7XG4gIGRlbGV0ZUljb24uYWx0ID0gJ1gnO1xuIFxuICBsZWZ0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RJY29uKTtcbiAgbGVmdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gIHByb2plY3QuYXBwZW5kQ2hpbGQobGVmdENvbnRhaW5lcik7XG4gIHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XG5cbiAgcmV0dXJuIHByb2plY3Q7XG59XG5cbmNvbnN0IERPTSA9ICgpID0+IHtcbiAgLy8gU2lkZWJhclxuICBjb25zdCBidG5JbmJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4taW5ib3gnKTtcbiAgY29uc3QgYnRuVG9kYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXRvZGF5Jyk7XG4gIGNvbnN0IGJ0bldlZWsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXdlZWsnKTtcbiAgXG4gIC8vIEFkZCBuZXcgcHJvamVjdFxuICBjb25zdCBidG5OZXdQcm9qZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXctcHJvamVjdCcpO1xuICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dC1jb250YWluZXInKTtcbiAgY29uc3QgcHJvamVjdE5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LW5hbWUtaW5wdXQnKTtcbiAgY29uc3QgYnRuQ29uZmlybVByb2plY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNvbmZpcm0tcHJvamVjdC1uYW1lJyk7XG4gIGNvbnN0IGJ0bkNhbmNlbFByb2plY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLXByb2plY3QnKTtcblxuICAvLyBUYXNrIExpc3RcbiAgY29uc3QgbGlzdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stbGlzdC10aXRsZScpO1xuICBjb25zdCBidG5OZXdUYXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXctdGFzaycpO1xuXG4gIC8vICdDcmVhdGUgVGFzaycgRm9ybVxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLXRhc2snKTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUtaW5wdXQnKTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24taW5wdXQnKTtcbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlLWlucHV0Jyk7XG4gIGNvbnN0IGJ0bkxvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbG93Jyk7XG4gIGNvbnN0IGJ0bk1pZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbWlkJyk7XG4gIGNvbnN0IGJ0bkhpZ2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWhpZ2gnKTtcbiAgY29uc3QgYnRuQWRkVGFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWRkLXRhc2snKTtcbiAgY29uc3QgYnRuQ2FuY2VsVGFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tY2FuY2VsLXRhc2snKTtcblxuXG4gIC8vICdFZGl0IFRhc2snIEZvcm1cbiAgY29uc3QgdGFza092ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheS1jb250YWluZXInKTtcbiAgY29uc3QgdGl0bGVFZGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlLWlucHV0LWVkaXQnKTtcbiAgY29uc3QgZGVzY3JpcHRpb25FZGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uLWlucHV0LWVkaXQnKTtcbiAgY29uc3QgZGF0ZUVkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZS1pbnB1dC1lZGl0Jyk7XG4gIGNvbnN0IGJ0bkxvd0VkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWxvdy1lZGl0Jyk7XG4gIGNvbnN0IGJ0bk1pZEVkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW1pZC1lZGl0Jyk7XG4gIGNvbnN0IGJ0bkhpZ2hFZGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1oaWdoLWVkaXQnKTtcbiAgY29uc3QgYnRuQ29uZmlybUVkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNvbmZpcm0tZWRpdCcpO1xuICBjb25zdCBidG5DYW5jZWxFZGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1jYW5jZWwtZWRpdCcpO1xuXG4gIC8vIFBhcmVudCBOb2Rlc1xuICBjb25zdCBwcm9qZWN0TGlzdFBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LWxpc3QnKTtcbiAgY29uc3QgdGFza0xpc3RQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0Jyk7XG5cbiAgLy8gTWV0aG9kcyAocHJvamVjdHMpXG4gIGZ1bmN0aW9uIGdldFByb2plY3ROYW1lKCkge1xuICAgIHJldHVybiBwcm9qZWN0TmFtZUlucHV0LnZhbHVlO1xuICB9XG5cbiAgLy8gTWV0aG9kcyAodGFza3MpXG4gIGZ1bmN0aW9uIHRhc2tMaXN0QWRkKHRhc2spIHtcbiAgICB0YXNrTGlzdFBhcmVudC5hcHBlbmRDaGlsZCh0YXNrKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gcHJvamVjdExpc3RBZGQocHJvamVjdCkge1xuICAgIHByb2plY3RMaXN0UGFyZW50LmFwcGVuZENoaWxkKHByb2plY3QpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFza05hbWUoKSB7XG4gICAgcmV0dXJuIHRpdGxlLnZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VGFza05hbWUobmV3TmFtZSkge1xuICAgIHRpdGxlLnZhbHVlID0gbmV3TmFtZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKCkge1xuICAgIHJldHVybiBkZXNjcmlwdGlvbi52YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldERlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgZGVzY3JpcHRpb24udmFsdWUgPSBuZXdEZXNjcmlwdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERhdGUoKSB7XG4gICAgcmV0dXJuIGRhdGUudmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBzZXREYXRlKG5ld0RhdGUpIHtcbiAgICBkYXRlLnZhbHVlID0gbmV3RGF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldExpc3RUaXRsZShuZXdUaXRsZSkge1xuICAgIGxpc3RUaXRsZS5pbm5lckhUTUwgPSBuZXdUaXRsZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVByaW9yaXR5KGxvdywgbWlkLCBoaWdoLCBwcmlvcml0eSkge1xuICAgIGlmKHByaW9yaXR5ID09PSAwKSB7XG4gICAgICBsb3cuY2xhc3NMaXN0LmFkZCgncHJpb3JpdHktbG93LW9uJyk7XG4gICAgICBtaWQuY2xhc3NMaXN0LnJlbW92ZSgncHJpb3JpdHktbWlkLW9uJyk7XG4gICAgICBoaWdoLmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW9yaXR5LWhpZ2gtb24nKTtcbiAgICB9IGVsc2UgaWYocHJpb3JpdHkgPT09IDEpIHtcbiAgICAgIG1pZC5jbGFzc0xpc3QuYWRkKCdwcmlvcml0eS1taWQtb24nKTtcbiAgICAgIGxvdy5jbGFzc0xpc3QucmVtb3ZlKCdwcmlvcml0eS1sb3ctb24nKTtcbiAgICAgIGhpZ2guY2xhc3NMaXN0LnJlbW92ZSgncHJpb3JpdHktaGlnaC1vbicpO1xuICAgIH0gZWxzZSBpZihwcmlvcml0eSA9PT0gMikge1xuICAgICAgaGlnaC5jbGFzc0xpc3QuYWRkKCdwcmlvcml0eS1oaWdoLW9uJyk7XG4gICAgICBsb3cuY2xhc3NMaXN0LnJlbW92ZSgncHJpb3JpdHktbG93LW9uJyk7XG4gICAgICBtaWQuY2xhc3NMaXN0LnJlbW92ZSgncHJpb3JpdHktbWlkLW9uJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZ2guY2xhc3NMaXN0LnJlbW92ZSgncHJpb3JpdHktaGlnaC1vbicpO1xuICAgICAgbG93LmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW9yaXR5LWxvdy1vbicpO1xuICAgICAgbWlkLmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW9yaXR5LW1pZC1vbicpO1xuICAgIH1cbiAgfVxuXG4gIFxuICBmdW5jdGlvbiBjbGVhckZpZWxkcygpIHtcbiAgICBzZXRUYXNrTmFtZSgnJyk7XG4gICAgc2V0RGVzY3JpcHRpb24oJycpO1xuICAgIHNldERhdGUoJycpO1xuICAgIHVwZGF0ZVByaW9yaXR5KGJ0bkxvdywgYnRuTWlkLCBidG5IaWdoLCAnJyk7XG4gICAgdXBkYXRlUHJpb3JpdHkoYnRuTG93RWRpdCwgYnRuTWlkRWRpdCwgYnRuSGlnaEVkaXQsICcnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gc2hvd1Rhc2tMaXN0UGxhY2Vob2xkZXIoKSB7XG4gICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgdGV4dC5pbm5lckhUTUwgPSAnTm90aGluZyBoZXJlLi4uJztcbiAgICB0ZXh0LnN0eWxlLmNvbG9yID0gJ2dyYXknO1xuICAgIHRhc2tMaXN0UGFyZW50LmFwcGVuZENoaWxkKHRleHQpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1Byb2plY3RMaXN0UGxhY2Vob2xkZXIoKSB7XG4gICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgdGV4dC5pbm5lckhUTUwgPSAnTm90aGluZyBoZXJlLi4uJztcbiAgICBwcm9qZWN0TGlzdFBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTtcbiAgfVxuXG4gIHJldHVybiB7IHRhc2tEaXZGYWN0b3J5LCBwcm9qZWN0RGl2RmFjdG9yeSwgYnRuSW5ib3gsIGJ0blRvZGF5LCBidG5XZWVrLCBidG5OZXdQcm9qZWN0LCBjb250YWluZXIsIFxuICAgICAgICAgICBpbnB1dENvbnRhaW5lciwgcHJvamVjdE5hbWVJbnB1dCwgYnRuQ29uZmlybVByb2plY3QsIGJ0bkNhbmNlbFByb2plY3QsIGJ0bk5ld1Rhc2ssIGJ0bkxvdywgYnRuTWlkLCAgXG4gICAgICAgICAgIGJ0bkhpZ2gsIGJ0bkFkZFRhc2ssIGJ0bkNhbmNlbFRhc2ssIHByb2plY3RMaXN0UGFyZW50LCB0YXNrTGlzdFBhcmVudCwgdGFza092ZXJsYXksIFxuICAgICAgICAgICB0YXNrTGlzdEFkZCwgcHJvamVjdExpc3RBZGQsIGdldFRhc2tOYW1lLCBzZXRUYXNrTmFtZSwgZ2V0UHJvamVjdE5hbWUsIGdldERlc2NyaXB0aW9uLCAgXG4gICAgICAgICAgIHNldERlc2NyaXB0aW9uLCBnZXREYXRlLCBzZXREYXRlLCB0aXRsZUVkaXQsIGRlc2NyaXB0aW9uRWRpdCwgZGF0ZUVkaXQsIGJ0bkxvd0VkaXQsIGJ0bk1pZEVkaXQsIFxuICAgICAgICAgICBidG5IaWdoRWRpdCwgYnRuQ29uZmlybUVkaXQsIGJ0bkNhbmNlbEVkaXQsIHNldExpc3RUaXRsZSwgdXBkYXRlUHJpb3JpdHksIGNsZWFyRmllbGRzLCBcbiAgICAgICAgICAgc2hvd1Rhc2tMaXN0UGxhY2Vob2xkZXIsIHNob3dQcm9qZWN0TGlzdFBsYWNlaG9sZGVyIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBET007IiwiY2xhc3MgVGFzayB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY29tcGxldGVkID0gZmFsc2UpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgfVxuXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG4gIFxuICBzZXQgbmFtZShuZXdOYW1lKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5ld05hbWU7XG4gIH1cblxuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICB9XG5cbiAgc2V0IGRlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgfVxuXG4gIGdldCBkdWVEYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9kdWVEYXRlO1xuICB9XG5cbiAgc2V0IGR1ZURhdGUoZGF0ZSkge1xuICAgIHRoaXMuX2R1ZURhdGUgPSBkYXRlO1xuICB9XG5cbiAgZ2V0IHByaW9yaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9wcmlvcml0eTtcbiAgfVxuXG4gIHNldCBwcmlvcml0eShuZXdQcmlvcml0eSkge1xuICAgIHRoaXMuX3ByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gIH1cblxuICBnZXQgY29tcGxldGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wbGV0ZWQ7XG4gIH1cblxuICBzZXQgY29tcGxldGVkKGNvbXBsZXRlKSB7XG4gICAgdGhpcy5fY29tcGxldGVkID0gY29tcGxldGU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGFzazsiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xuY2xhc3MgUHJvamVjdCB7XG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubXlUYXNrcyA9IFtdO1xuICAgIHRoaXMuaXNDb21wbGV0ZSA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cblxuICBzZXQgbmFtZSh2YWx1ZSkge1xuICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBteVRhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLl9teVRhc2tzO1xuICB9XG5cbiAgc2V0IG15VGFza3MobGlzdCkge1xuICAgIHRoaXMuX215VGFza3MgPSBsaXN0O1xuICB9XG5cbiAgYWRkVGFzayh0YXNrKSB7XG4gICAgdGhpcy5teVRhc2tzLnB1c2godGFzayk7XG4gIH1cblxuICBnZXQgaXNDb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNDb21wbGV0ZTtcbiAgfVxuXG4gIHNldCBpc0NvbXBsZXRlKHN0YXR1cykge1xuICAgIHRoaXMuX2lzQ29tcGxldGUgPSBzdGF0dXM7XG4gIH1cblxuICByZW1vdmVUYXNrKHRhc2spIHtcbiAgICB0aGlzLm15VGFza3Muc3BsaWNlKHRoaXMubXlUYXNrcy5pbmRleE9mKHRhc2spLCAxKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdDsiLCJmdW5jdGlvbiBzYXZlRGVmYXVsdFByb2plY3QocHJvamVjdCkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGVmYXVsdFByb2plY3QnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSk7XG59XG5cbmZ1bmN0aW9uIGxvYWREZWZhdWx0UHJvamVjdCgpIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmRlZmF1bHRQcm9qZWN0KTtcbn1cblxuZnVuY3Rpb24gc2F2ZVByb2plY3RzKHByb2plY3RMaXN0LCBkZWZhdWx0UHJvamVjdCkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICBzYXZlRGVmYXVsdFByb2plY3QoZGVmYXVsdFByb2plY3QpO1xufTtcblxuZnVuY3Rpb24gbG9hZFByb2plY3RzKCkge1xuICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdHMnKSk7XG59XG5cbmV4cG9ydCB7IGxvYWREZWZhdWx0UHJvamVjdCwgc2F2ZVByb2plY3RzLCBsb2FkUHJvamVjdHMgfVxuXG4iLCJpbXBvcnQgRE9NIGZyb20gJy4vZGlzcGxheSc7XG5pbXBvcnQgVGFzayBmcm9tICcuL3Rhc2snO1xuaW1wb3J0IFByb2plY3QgZnJvbSAnLi9wcm9qZWN0JztcbmltcG9ydCB7IHNhdmVQcm9qZWN0cywgbG9hZFByb2plY3RzLCBsb2FkRGVmYXVsdFByb2plY3QgfSBmcm9tICcuL2FwcFN0b3JhZ2UnO1xuXG5jb25zdCBkaXNwbGF5ID0gRE9NKCk7XG5cbmNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gbmV3IFByb2plY3QoJ0lOQk9YJyk7XG5cbmNvbnN0IHByb2plY3RNYW5hZ2VyID0ge1xuICBwcm9qZWN0czogW10sXG4gIGFjdGl2ZVByb2plY3Q6IGRlZmF1bHRQcm9qZWN0XG59XG5cbmNvbnN0IHRhc2tNYW5hZ2VyID0ge1xuICBhY3RpdmVUYXNrOiB1bmRlZmluZWQsXG4gIGN1cnJlbnRQcmlvcml0eTogMFxufVxuXG5mdW5jdGlvbiByZXRyaWV2ZVRhc2sodGFzaykge1xuICByZXR1cm4gbmV3IFRhc2sodGFzay5fbmFtZSwgdGFzay5fZGVzY3JpcHRpb24sIG5ldyBEYXRlKHRhc2suX2R1ZURhdGUpLCB0YXNrLl9wcmlvcml0eSwgdGFzay5fY29tcGxldGVkKTtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVQcm9qZWN0KHByb2plY3QpIHtcbiAgcmV0dXJuIG5ldyBQcm9qZWN0KHByb2plY3QuX25hbWUpO1xufVxuXG5pZihcInByb2plY3RzXCIgaW4gbG9jYWxTdG9yYWdlKSB7XG4gIGNvbnN0IHN0b3JhZ2VUYXNrcyA9IGxvYWREZWZhdWx0UHJvamVjdCgpLl9teVRhc2tzO1xuICBmb3IoY29uc3QgdGFzayBvZiBzdG9yYWdlVGFza3MpIHtcbiAgICBkZWZhdWx0UHJvamVjdC5teVRhc2tzLnB1c2gocmV0cmlldmVUYXNrKHRhc2spKTtcbiAgfVxuXG4gIGNvbnN0IHN0b3JhZ2VQcm9qZWN0cyA9IGxvYWRQcm9qZWN0cygpO1xuICBmb3IoY29uc3QgcHJvamVjdCBvZiBzdG9yYWdlUHJvamVjdHMpIHtcbiAgICBjb25zdCBwcm9qZWN0T2JqZWN0ID0gcmV0cmlldmVQcm9qZWN0KHByb2plY3QpO1xuXG4gICAgZm9yKGNvbnN0IHRhc2sgb2YgcHJvamVjdC5fbXlUYXNrcykge1xuICAgICAgcHJvamVjdE9iamVjdC5teVRhc2tzLnB1c2gocmV0cmlldmVUYXNrKHRhc2spKTtcbiAgICB9XG5cbiAgICBwcm9qZWN0TWFuYWdlci5wcm9qZWN0cy5wdXNoKHByb2plY3RPYmplY3QpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEFsbFRhc2tzKCkge1xuICBjb25zdCB0YXNrcyA9IFtdO1xuXG4gIHRhc2tzLnB1c2goZGVmYXVsdFByb2plY3QubXlUYXNrcyk7XG5cbiAgZm9yKGNvbnN0IHByb2plY3Qgb2YgcHJvamVjdE1hbmFnZXIucHJvamVjdHMpIHtcbiAgICB0YXNrcy5wdXNoKHByb2plY3QubXlUYXNrcyk7XG4gIH1cblxuICByZXR1cm4gdGFza3MuZmxhdCgpO1xufVxuXG5mdW5jdGlvbiBpc1RvZGF5KGRhdGUpIHtcbiAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLmdldERhdGUoKTtcbiAgcmV0dXJuIGRhdGUuZ2V0VVRDRGF0ZSgpID09PSBjdXJyZW50RGF0ZTtcbn1cblxuZnVuY3Rpb24gaXNUaGlzV2VlayhkYXRlKSB7XG4gIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgY29uc3Qgd2Vla1N0YXJ0ID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSwgY3VycmVudERhdGUuZ2V0TW9udGgoKSwgY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gY3VycmVudERhdGUuZ2V0RGF5KCkpO1xuICBjb25zdCB3ZWVrRW5kID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSwgY3VycmVudERhdGUuZ2V0TW9udGgoKSwgY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgKDYgLSBjdXJyZW50RGF0ZS5nZXREYXkoKSkpO1xuICBcbiAgcmV0dXJuIGRhdGUgPj0gd2Vla1N0YXJ0ICYmIGRhdGUgPD0gd2Vla0VuZDtcbn1cblxuZnVuY3Rpb24gYWRkVGFza0hhbmRsZXIoKSB7XG4gIGlmKGRpc3BsYXkuZ2V0VGFza05hbWUoKSAhPT0gJycpIHtcbiAgICBjb25zdCBuYW1lID0gZGlzcGxheS5nZXRUYXNrTmFtZSgpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZGlzcGxheS5nZXREZXNjcmlwdGlvbigpO1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShgJHtkaXNwbGF5LmdldERhdGUoKX1gKTtcbiAgICBjb25zdCB0YXNrID0gbmV3IFRhc2sobmFtZSwgZGVzY3JpcHRpb24sIGRhdGUsIHRhc2tNYW5hZ2VyLmN1cnJlbnRQcmlvcml0eSwgZmFsc2UpO1xuICAgIHByb2plY3RNYW5hZ2VyLmFjdGl2ZVByb2plY3QubXlUYXNrcy5wdXNoKHRhc2spO1xuICAgIHJlZnJlc2hUYXNrTGlzdChwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0Lm15VGFza3MpO1xuICAgIGRpc3BsYXkuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZGlzcGxheS5jbGVhckZpZWxkcygpO1xuICAgIHNhdmVQcm9qZWN0cyhwcm9qZWN0TWFuYWdlci5wcm9qZWN0cywgZGVmYXVsdFByb2plY3QpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbmZpcm1FZGl0SGFuZGxlcigpIHtcbiAgZGlzcGxheS50YXNrT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBjb25zdCB0YXNrID0gdGFza01hbmFnZXIuYWN0aXZlVGFzaztcbiAgdGFzay5uYW1lID0gZGlzcGxheS50aXRsZUVkaXQudmFsdWU7XG4gIHRhc2suZGVzY3JpcHRpb24gPSBkaXNwbGF5LmRlc2NyaXB0aW9uRWRpdC52YWx1ZTtcbiAgdGFzay5wcmlvcml0eSA9IHRhc2tNYW5hZ2VyLmN1cnJlbnRQcmlvcml0eTtcbiAgdGFzay5kYXRlID0gZGlzcGxheS5kYXRlRWRpdC52YWx1ZTtcbiAgcmVmcmVzaFRhc2tMaXN0KHByb2plY3RNYW5hZ2VyLmFjdGl2ZVByb2plY3QubXlUYXNrcyk7XG4gIHNhdmVQcm9qZWN0cyhwcm9qZWN0TWFuYWdlci5wcm9qZWN0cywgZGVmYXVsdFByb2plY3QpO1xufVxuXG5mdW5jdGlvbiBlZGl0VGFza0hhbmRsZXIodGFzaykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZGlzcGxheS50YXNrT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRhc2tNYW5hZ2VyLmFjdGl2ZVRhc2sgPSB0YXNrO1xuICAgIGRpc3BsYXkudGl0bGVFZGl0LnZhbHVlID0gdGFzay5uYW1lO1xuICAgIGRpc3BsYXkuZGVzY3JpcHRpb25FZGl0LnZhbHVlID0gdGFzay5kZXNjcmlwdGlvbjtcbiAgICBkaXNwbGF5LnVwZGF0ZVByaW9yaXR5KGRpc3BsYXkuYnRuTG93RWRpdCwgZGlzcGxheS5idG5NaWRFZGl0LCBkaXNwbGF5LmJ0bkhpZ2hFZGl0LCB0YXNrLnByaW9yaXR5KTtcbiAgICBpZih0YXNrLmR1ZURhdGUgIT09ICcnKSB7XG4gICAgICBkaXNwbGF5LmRhdGVFZGl0LnZhbHVlID0gdGFzay5kdWVEYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlUHJvamVjdEhhbmRsZXIocHJvamVjdCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcHJvamVjdE1hbmFnZXIucHJvamVjdHMuc3BsaWNlKHByb2plY3QsIDEpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwcm9qZWN0LSR7cHJvamVjdH1gKS5yZW1vdmUoKTtcbiAgICBwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0ID0gZGVmYXVsdFByb2plY3Q7XG4gICAgZGlzcGxheS5zZXRMaXN0VGl0bGUocHJvamVjdE1hbmFnZXIuYWN0aXZlUHJvamVjdC5uYW1lKTtcbiAgICByZWZyZXNoVGFza0xpc3QocHJvamVjdE1hbmFnZXIuYWN0aXZlUHJvamVjdC5teVRhc2tzKTtcbiAgICBzYXZlUHJvamVjdHMocHJvamVjdE1hbmFnZXIucHJvamVjdHMsIGRlZmF1bHRQcm9qZWN0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b2dnbGVQcm9qZWN0SGFuZGxlcihwcm9qZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0ID0gcHJvamVjdE1hbmFnZXIucHJvamVjdHNbcHJvamVjdF07XG4gICAgZGlzcGxheS5zZXRMaXN0VGl0bGUocHJvamVjdE1hbmFnZXIuYWN0aXZlUHJvamVjdC5uYW1lKTtcbiAgICByZWZyZXNoVGFza0xpc3QocHJvamVjdE1hbmFnZXIuYWN0aXZlUHJvamVjdC5teVRhc2tzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25maXJtUHJvamVjdEhhbmRsZXIoKSB7XG4gIGlmKGRpc3BsYXkuZ2V0UHJvamVjdE5hbWUoKSAhPT0gJycpIHtcbiAgICBjb25zdCBuYW1lID0gZGlzcGxheS5nZXRQcm9qZWN0TmFtZSgpO1xuICAgIHByb2plY3RNYW5hZ2VyLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QobmFtZSkpO1xuICAgIHByb2plY3RNYW5hZ2VyLmFjdGl2ZVByb2plY3QgPSBwcm9qZWN0TWFuYWdlci5wcm9qZWN0c1twcm9qZWN0TWFuYWdlci5wcm9qZWN0cy5sZW5ndGgtMV07XG4gICAgc2hvd1Byb2plY3RzKHByb2plY3RNYW5hZ2VyLnByb2plY3RzKTtcbiAgICBkaXNwbGF5LnNldExpc3RUaXRsZShwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0Lm5hbWUpO1xuICAgIGRpc3BsYXkuaW5wdXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIGRpc3BsYXkucHJvamVjdE5hbWVJbnB1dC52YWx1ZSA9ICcnO1xuICAgIHNhdmVQcm9qZWN0cyhwcm9qZWN0TWFuYWdlci5wcm9qZWN0cywgZGVmYXVsdFByb2plY3QpO1xuICAgIHJlZnJlc2hUYXNrTGlzdChwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0Lm15VGFza3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyb3NzT3V0VGFzayh0YXNrKSB7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdGFzay0ke3Rhc2suZGF0YXNldC5pbmRleH0tbmFtZWApO1xuICBnZXRBbGxUYXNrcygpW3Rhc2suZGF0YXNldC5pbmRleF0uY29tcGxldGVkID0gdHJ1ZTtcbiAgbmFtZS5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICBuYW1lLnN0eWxlLmNvbG9yID0gJ2dyYXknO1xufVxuXG5mdW5jdGlvbiB1bmRvQ3Jvc3NvdXQodGFzaykge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRhc2stJHt0YXNrLmRhdGFzZXQuaW5kZXh9LW5hbWVgKTtcbiAgZ2V0QWxsVGFza3MoKVt0YXNrLmRhdGFzZXQuaW5kZXhdLmNvbXBsZXRlZCA9IGZhbHNlO1xuICBuYW1lLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnO1xuICBuYW1lLnN0eWxlLmNvbG9yID0gJyc7XG59XG5cbmZ1bmN0aW9uIHNob3dUYXNrcyhsaXN0KSB7XG4gIHdoaWxlKGRpc3BsYXkudGFza0xpc3RQYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgIGRpc3BsYXkudGFza0xpc3RQYXJlbnQucmVtb3ZlQ2hpbGQoZGlzcGxheS50YXNrTGlzdFBhcmVudC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIC8vIEFwcGVuZCB0YXNrcyB0byBjdXJyZW50IHRhc2sgbGlzdFxuICBmb3IoY29uc3QgdGFzayBvZiBsaXN0KSB7XG4gICAgdGFza01hbmFnZXIuYWN0aXZlVGFzayA9IHRhc2s7XG4gICAgaWYoaXNOYU4odGFzay5kdWVEYXRlLmdldERhdGUoKSkpIHtcbiAgICAgIGRpc3BsYXkudGFza0xpc3RBZGQoZGlzcGxheS50YXNrRGl2RmFjdG9yeSh0YXNrLm5hbWUsIHRhc2suZGVzY3JpcHRpb24sICcnLCB0YXNrLnByaW9yaXR5LCB0YXNrLmNvbXBsZXRlZCwgbGlzdC5pbmRleE9mKHRhc2spLCBlZGl0VGFza0hhbmRsZXIodGFza01hbmFnZXIuYWN0aXZlVGFzaykpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGxheS50YXNrTGlzdEFkZChkaXNwbGF5LnRhc2tEaXZGYWN0b3J5KHRhc2submFtZSwgdGFzay5kZXNjcmlwdGlvbiwgdGFzay5kdWVEYXRlLCB0YXNrLnByaW9yaXR5LCB0YXNrLmNvbXBsZXRlZCwgbGlzdC5pbmRleE9mKHRhc2spLCBlZGl0VGFza0hhbmRsZXIodGFza01hbmFnZXIuYWN0aXZlVGFzaykpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgbGlzdGVuZXJzIHRvIHJlbW92ZSBhbmQgZWRpdCBidXR0b25zXG4gIGZvcihjb25zdCB0YXNrIG9mIEFycmF5LmZyb20oZGlzcGxheS50YXNrTGlzdFBhcmVudC5jaGlsZE5vZGVzKSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGFzay5kYXRhc2V0LmluZGV4O1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRhc2stJHtpbmRleH0tY2hlY2tib3hgKTtcbiAgICBjb25zdCByZW1vdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcmVtb3ZlLXRhc2stJHtpbmRleH1gKTtcblxuICAgIHJlbW92ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHByb2plY3RNYW5hZ2VyLmFjdGl2ZVByb2plY3QucmVtb3ZlVGFzayhwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0Lm15VGFza3NbaW5kZXhdKTtcbiAgICAgIHRhc2sucmVtb3ZlKCk7XG4gICAgICByZWZyZXNoVGFza0xpc3QocHJvamVjdE1hbmFnZXIuYWN0aXZlUHJvamVjdC5teVRhc2tzKTtcbiAgICB9KTtcblxuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYoIWNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgdW5kb0Nyb3Nzb3V0KHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3Jvc3NPdXRUYXNrKHRhc2spO1xuICAgICAgfVxuXG4gICAgICBzYXZlUHJvamVjdHMocHJvamVjdE1hbmFnZXIucHJvamVjdHMsIGRlZmF1bHRQcm9qZWN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgZGlzcGxheS5zaG93VGFza0xpc3RQbGFjZWhvbGRlcigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlZnJlc2hUYXNrTGlzdChuZXdMaXN0KSB7XG4gIHNob3dUYXNrcyhuZXdMaXN0KTtcbn1cblxuZnVuY3Rpb24gc2hvd1Byb2plY3RzKGxpc3QpIHtcbiAgd2hpbGUoZGlzcGxheS5wcm9qZWN0TGlzdFBhcmVudC5maXJzdENoaWxkKSB7XG4gICAgZGlzcGxheS5wcm9qZWN0TGlzdFBhcmVudC5yZW1vdmVDaGlsZChkaXNwbGF5LnByb2plY3RMaXN0UGFyZW50LmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgZm9yKGNvbnN0IHByb2plY3Qgb2YgbGlzdCkge1xuICAgIGRpc3BsYXkucHJvamVjdExpc3RBZGQoZGlzcGxheS5wcm9qZWN0RGl2RmFjdG9yeShwcm9qZWN0Lm5hbWUsIGxpc3QuaW5kZXhPZihwcm9qZWN0KSkpO1xuICB9XG5cbiAgZm9yKGNvbnN0IHByb2plY3Qgb2YgQXJyYXkuZnJvbShkaXNwbGF5LnByb2plY3RMaXN0UGFyZW50LmNoaWxkTm9kZXMpKSB7XG4gICAgY29uc3QgcmVtb3ZlID0gcHJvamVjdC5jaGlsZE5vZGVzWzFdO1xuICAgIGNvbnN0IGluZGV4ID0gcHJvamVjdC5jaGlsZE5vZGVzWzBdLmRhdGFzZXQuaW5kZXg7XG4gICAgcmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlUHJvamVjdEhhbmRsZXIoaW5kZXgpKTtcbiAgICBwcm9qZWN0LmNoaWxkTm9kZXNbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVQcm9qZWN0SGFuZGxlcihpbmRleCkpO1xuICB9XG5cbiAgaWYobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICBkaXNwbGF5LnNob3dQcm9qZWN0TGlzdFBsYWNlaG9sZGVyKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaG9va01lbnVMaXN0ZW5lcnMoKSB7XG4gIGRpc3BsYXkuYnRuQWRkVGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFRhc2tIYW5kbGVyKTtcblxuICBkaXNwbGF5LmJ0bkNhbmNlbFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZGlzcGxheS5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkaXNwbGF5LmNsZWFyRmllbGRzKCk7XG4gIH0pO1xuICBcbiAgZGlzcGxheS5idG5Db25maXJtUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmZpcm1Qcm9qZWN0SGFuZGxlcik7XG4gIFxuICBkaXNwbGF5LmJ0bkluYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJlZnJlc2hUYXNrTGlzdChkZWZhdWx0UHJvamVjdC5teVRhc2tzKTtcbiAgICBwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0ID0gZGVmYXVsdFByb2plY3Q7XG4gICAgZGlzcGxheS5zZXRMaXN0VGl0bGUoJ0lOQk9YJyk7XG4gIH0pO1xuICBcbiAgZGlzcGxheS5idG5Ub2RheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCB0b2RheVRhc2tzID0gZ2V0QWxsVGFza3MoKS5maWx0ZXIodGFzayA9PiBpc1RvZGF5KHRhc2suZHVlRGF0ZSkpO1xuICAgIHJlZnJlc2hUYXNrTGlzdCh0b2RheVRhc2tzKTtcbiAgICBwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0ID0gZGVmYXVsdFByb2plY3Q7XG4gICAgZGlzcGxheS5zZXRMaXN0VGl0bGUoJ1RPREFZJyk7XG4gIH0pO1xuICBcbiAgZGlzcGxheS5idG5XZWVrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHdlZWtUYXNrcyA9IGdldEFsbFRhc2tzKCkuZmlsdGVyKHRhc2sgPT4gaXNUaGlzV2Vlayh0YXNrLmR1ZURhdGUpKTtcbiAgICByZWZyZXNoVGFza0xpc3Qod2Vla1Rhc2tzKTtcbiAgICBwcm9qZWN0TWFuYWdlci5hY3RpdmVQcm9qZWN0ID0gZGVmYXVsdFByb2plY3Q7XG4gICAgZGlzcGxheS5zZXRMaXN0VGl0bGUoJ1RISVMgV0VFSycpO1xuICB9KTtcblxuICBkaXNwbGF5LmJ0bk5ld1Rhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZGlzcGxheS5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5OZXdQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRpc3BsYXkuaW5wdXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5DYW5jZWxQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRpc3BsYXkuaW5wdXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkaXNwbGF5LnByb2plY3ROYW1lSW5wdXQudmFsdWUgPSAnJztcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5Db25maXJtRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmZpcm1FZGl0SGFuZGxlcik7XG5cbiAgZGlzcGxheS5idG5DYW5jZWxFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRpc3BsYXkudGFza092ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5Mb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGFza01hbmFnZXIuY3VycmVudFByaW9yaXR5ID0gMDtcbiAgICBkaXNwbGF5LnVwZGF0ZVByaW9yaXR5KGRpc3BsYXkuYnRuTG93LCBkaXNwbGF5LmJ0bk1pZCwgZGlzcGxheS5idG5IaWdoLCAwKTtcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5NaWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGFza01hbmFnZXIuY3VycmVudFByaW9yaXR5ID0gMTtcbiAgICBkaXNwbGF5LnVwZGF0ZVByaW9yaXR5KGRpc3BsYXkuYnRuTG93LCBkaXNwbGF5LmJ0bk1pZCwgZGlzcGxheS5idG5IaWdoLCAxKTtcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5IaWdoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHRhc2tNYW5hZ2VyLmN1cnJlbnRQcmlvcml0eSA9IDI7XG4gICAgZGlzcGxheS51cGRhdGVQcmlvcml0eShkaXNwbGF5LmJ0bkxvdywgZGlzcGxheS5idG5NaWQsIGRpc3BsYXkuYnRuSGlnaCwgMik7XG4gIH0pO1xuXG4gIGRpc3BsYXkuYnRuTG93RWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB0YXNrTWFuYWdlci5jdXJyZW50UHJpb3JpdHkgPSAwO1xuICAgIGRpc3BsYXkudXBkYXRlUHJpb3JpdHkoZGlzcGxheS5idG5Mb3dFZGl0LCBkaXNwbGF5LmJ0bk1pZEVkaXQsIGRpc3BsYXkuYnRuSGlnaEVkaXQsIDApO1xuICB9KTtcblxuICBkaXNwbGF5LmJ0bk1pZEVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGFza01hbmFnZXIuY3VycmVudFByaW9yaXR5ID0gMTtcbiAgICBkaXNwbGF5LnVwZGF0ZVByaW9yaXR5KGRpc3BsYXkuYnRuTG93RWRpdCwgZGlzcGxheS5idG5NaWRFZGl0LCBkaXNwbGF5LmJ0bkhpZ2hFZGl0LCAxKTtcbiAgfSk7XG5cbiAgZGlzcGxheS5idG5IaWdoRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB0YXNrTWFuYWdlci5jdXJyZW50UHJpb3JpdHkgPSAyO1xuICAgIGRpc3BsYXkudXBkYXRlUHJpb3JpdHkoZGlzcGxheS5idG5Mb3dFZGl0LCBkaXNwbGF5LmJ0bk1pZEVkaXQsIGRpc3BsYXkuYnRuSGlnaEVkaXQsIDIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZEFwcCgpIHtcbiAgICByZWZyZXNoVGFza0xpc3QoZGVmYXVsdFByb2plY3QubXlUYXNrcyk7XG4gICAgc2hvd1Byb2plY3RzKHByb2plY3RNYW5hZ2VyLnByb2plY3RzKTtcbiAgICBob29rTWVudUxpc3RlbmVycygpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBsb2FkQXBwO1xuIl0sIm5hbWVzIjpbInRhc2tEaXZGYWN0b3J5IiwibmFtZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGVkIiwidGFza0lkIiwiZWRpdEhhbmRsZXIiLCJ0YXNrIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaWQiLCJkYXRhc2V0IiwiaW5kZXgiLCJsZWZ0U2VjdGlvbiIsInJpZ2h0U2VjdGlvbiIsImNoZWNrYm94IiwidHlwZSIsImNoZWNrZWQiLCJsYWJlbE5hbWUiLCJpbm5lckhUTUwiLCJsYWJlbERlc2MiLCJjbGFzc05hbWUiLCJzdHlsZSIsInRleHREZWNvcmF0aW9uIiwiY29sb3IiLCJhcHBlbmRDaGlsZCIsImxhYmVsUHJpb3JpdHkiLCJkaXZpc29yIiwiZGF0ZSIsImdldFVUQ0RhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZWRpdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcmMiLCJhbHQiLCJyZW1vdmUiLCJwcm9qZWN0RGl2RmFjdG9yeSIsInByb2plY3RJZCIsInByb2plY3QiLCJsZWZ0Q29udGFpbmVyIiwicHJvamVjdEljb24iLCJwcm9qZWN0TmFtZSIsImRlbGV0ZUljb24iLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJfbmFtZSIsIm5ld05hbWUiLCJfZGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsIl9kdWVEYXRlIiwiX3ByaW9yaXR5IiwibmV3UHJpb3JpdHkiLCJfY29tcGxldGVkIiwiY29tcGxldGUiLCJteVRhc2tzIiwiaXNDb21wbGV0ZSIsInZhbHVlIiwiX215VGFza3MiLCJsaXN0IiwiYWRkVGFzayIsInB1c2giLCJfaXNDb21wbGV0ZSIsInN0YXR1cyIsInJlbW92ZVRhc2siLCJzcGxpY2UiLCJpbmRleE9mIiwic2F2ZVByb2plY3RzIiwicHJvamVjdExpc3QiLCJkZWZhdWx0UHJvamVjdCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiYnRuSW5ib3giLCJnZXRFbGVtZW50QnlJZCIsImJ0blRvZGF5IiwiYnRuV2VlayIsImJ0bk5ld1Byb2plY3QiLCJpbnB1dENvbnRhaW5lciIsInByb2plY3ROYW1lSW5wdXQiLCJidG5Db25maXJtUHJvamVjdCIsImJ0bkNhbmNlbFByb2plY3QiLCJsaXN0VGl0bGUiLCJidG5OZXdUYXNrIiwiY29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInRpdGxlIiwiYnRuTG93IiwiYnRuTWlkIiwiYnRuSGlnaCIsImJ0bkFkZFRhc2siLCJidG5DYW5jZWxUYXNrIiwidGFza092ZXJsYXkiLCJ0aXRsZUVkaXQiLCJkZXNjcmlwdGlvbkVkaXQiLCJkYXRlRWRpdCIsImJ0bkxvd0VkaXQiLCJidG5NaWRFZGl0IiwiYnRuSGlnaEVkaXQiLCJidG5Db25maXJtRWRpdCIsImJ0bkNhbmNlbEVkaXQiLCJwcm9qZWN0TGlzdFBhcmVudCIsInRhc2tMaXN0UGFyZW50Iiwic2V0VGFza05hbWUiLCJzZXREZXNjcmlwdGlvbiIsInNldERhdGUiLCJuZXdEYXRlIiwidXBkYXRlUHJpb3JpdHkiLCJsb3ciLCJtaWQiLCJoaWdoIiwidGFza0xpc3RBZGQiLCJwcm9qZWN0TGlzdEFkZCIsImdldFRhc2tOYW1lIiwiZ2V0UHJvamVjdE5hbWUiLCJnZXREZXNjcmlwdGlvbiIsImdldERhdGUiLCJzZXRMaXN0VGl0bGUiLCJuZXdUaXRsZSIsImNsZWFyRmllbGRzIiwic2hvd1Rhc2tMaXN0UGxhY2Vob2xkZXIiLCJ0ZXh0Iiwic2hvd1Byb2plY3RMaXN0UGxhY2Vob2xkZXIiLCJwcm9qZWN0TWFuYWdlciIsInByb2plY3RzIiwiYWN0aXZlUHJvamVjdCIsInRhc2tNYW5hZ2VyIiwiYWN0aXZlVGFzayIsInVuZGVmaW5lZCIsImN1cnJlbnRQcmlvcml0eSIsInJldHJpZXZlVGFzayIsIkRhdGUiLCJyZXRyaWV2ZVByb2plY3QiLCJzdG9yYWdlVGFza3MiLCJwYXJzZSIsInN0b3JhZ2VQcm9qZWN0cyIsImdldEl0ZW0iLCJwcm9qZWN0T2JqZWN0IiwiZ2V0QWxsVGFza3MiLCJ0YXNrcyIsImZsYXQiLCJhZGRUYXNrSGFuZGxlciIsInJlZnJlc2hUYXNrTGlzdCIsImRpc3BsYXkiLCJjb25maXJtRWRpdEhhbmRsZXIiLCJlZGl0VGFza0hhbmRsZXIiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwicmVtb3ZlUHJvamVjdEhhbmRsZXIiLCJ0b2dnbGVQcm9qZWN0SGFuZGxlciIsImNvbmZpcm1Qcm9qZWN0SGFuZGxlciIsImxlbmd0aCIsInNob3dQcm9qZWN0cyIsImNyb3NzT3V0VGFzayIsInVuZG9Dcm9zc291dCIsIm5ld0xpc3QiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJpc05hTiIsIkFycmF5IiwiZnJvbSIsImNoaWxkTm9kZXMiLCJzaG93VGFza3MiLCJmaWx0ZXIiLCJjdXJyZW50RGF0ZSIsImlzVG9kYXkiLCJ3ZWVrU3RhcnQiLCJnZXREYXkiLCJ3ZWVrRW5kIiwiaXNUaGlzV2VlayJdLCJzb3VyY2VSb290IjoiIn0=